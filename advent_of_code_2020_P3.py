## Toboggan Trajectory

input_map = """...#....#.#...##......#.#...##.
.#..#...##..#....##........##..
..##.##...##.#.#....#..#......#
....#....#..#..#.#....#..###...
####.....##.#.##...##..#....#..
#........##...#..###..#.#.#.##.
.......###........##...#...#...
#.#...#..#..#...#...##.##......
..#...........#......##.#.#....
#..#.#......##.#...#..#.#..#...
.#....#....#..#.....#..###..#.#
.##....................#.###.#.
..#......#.#......#..###.......
#.###..##..###....#........#..#
.....#...#.......#.#.#...#....#
....##..#.##..#.##..#.#....#...
.#..#..#......#..##.#.#....##.#
.....#.....#.##...#.#.##.#.....
.#...#..##.....#.........#.#...
.....#........#........#..#..#.
#......##....#..#.#...#...#....
#......#.#.......##.#..#.#.#...
...###...##.#..........#...#...
...#.##...#......#.##....#.#...
#...#.....#........#..#....##.#
##.#....##...##.####.##.......#
..#..#...#.#.......#.##.#......
##.........#.##....#.#...#.....
##..#......#....#.....#...#....
......##.#.#.....#.#.###...#...
##.......#......#.#..#...#.##..
#....#....#..#.#..#.#..........
...#....#.#.#.#.....##.#..#.##.
......#.#.#....#...##.#..#.....
..##..#.##....#...#.....#..#.##
.#...#.#.##..##........#.#...#.
##.##.##....#.#....##.###......
#...........#....##..#......#..
...##..#.....#....#....#.#..##.
.#..#.##..##..#.........#.....#
.##......##.#.#......##....#...
.....##.#....#...#...........##
..#.....#..##...#.#..#.........
...#.####..#.###.....#.....##..
.....#..##..#.###........#.#...
#..#.#.....#.....#...#...#....#
.#...........#..#.........##...
...#.#.#.......#..............#
.##.#..#...#........#.##.#.#.#.
....#....#.......#......#.#....
##.#..##.....##..#...#....#..#.
#.........#.#..###...#....#..#.
....##.###...#........##...#.##
.#...#..##.##...........##...##
.....#.##........#.#.......##..
.....#......#..#..#...#.#...#..
.....#.....#.#..#.###......####
........#.......#...........#..
...#.##..#....######..#.#...#..
#...##...####..##.....##...#...
.#.......#.###..#.##..#..#.#.#.
....#..#....##.....#........#.#
.#..#....##..#........#...#...#
#.#..#.#...##...#..........#.#.
##.####....##....#...##.####...
..##......##....#.....#...#..#.
...#......#..#...#..#.#....#.#.
......#...#....##....#.##......
.##...#.........####..#....#..#
...#..#.#......#.....#.#.#.#...
...........#.......#........##.
#.#....#....#.##.#...#...#.#...
#..#.....#..#..#.#...#........#
.....#.#.##...#............#.##
..#.#.#...#...#..###.#.....#...
....#.....##.......#......#....
.#.#....#.##......##.#.#.....#.
.....#.##.....#.#...#....#....#
...#.......#..#.#.###.#.###....
.#...#..#..#....#...###.#.##...
.#....#........#..........##...
##.#......#..#.#..........#.#..
...#..#.......#.##..###....#.#.
.#.....#..........#..#.........
...##...##.#.......#..#....#...
.....#.##....#.#.#...#.......#.
...#.#..#.#.......#.....##..#..
.#.#.......#.#..........#...#.#
#........#...#....###.#...#....
..##....#.#.#.....###.#.#......
..#.....#.#...#.#.....#.#......
.#.....##......#....##.#.#....#
...##..........#.#####...#..#..
#....#......##.............#...
......#.....#...##..#.#....#..#
..###.#.###.#.##.#.##..#.....#.
#...#....#.#....#..##...#...#.#
...#....#...#.#......#......#..
#......#.....#.#..#........#...
...##...##...##..###...###.#...
#..#...#...#.....#..###...##...
.#.....#.......#....#....##....
......#......##.#.#......#.#...
..#....#.#..........#..#...#..#
###...#..............#.........
.###.##..#.#..#.....#.#.##....#
..#......#.##....##......#....#
.##....###.#..#.#.............#
..##..#..#.#.#....#..##.#..#..#
##.#.....##...#..#...#..#.#.#..
.#.#..............#.#...#......
#....##...#....#..#...#........
...#..#..#.#........#..#..#..##
...##.#.#.#....#.......#....#..
.##.#......#.##........#...##..
.#.##..#.....###..#.#......#..#
#....#..#......#....##...#..#.#
..##....#.##...#..#.##....##..#
#....#..#...#.......#...#......
#.#......#....#.#..............
..##..#..#.#.......#.#.#...##..
...##.##......#..#.##.#.......#
.##.........#............#.#...
........#...#.....#....#....#..
#....##...#........#......##...
.###....#..#.#......#....#.#...
#.#...........#...#....#..#.#.#
.#....##.###...#.##....##..#..#
........#.............#.#...#.#
#.##..#.##....##.......#.......
.#.....#..#.##..##.....#.......
....#.#......#.#.............#.
..#.#.......#...#......##..#...
......##..###....##.#.###..##.#
..#..#.##...#...#....#.##..#..#
#.##...##.##.#.#........#......
...#.#.......##....#.......#...
.#....#.##.#..#.......#.....##.
#..#...##.####..###.....#......
..#...##...#...#.#......#...#.#
.##.##.#...#.....#.##..##......
.#...#.#.##.###..#...#...#.....
.#..##..#....##.##....##....##.
..#...##....#..###........##...
.#..#..#.#....#.#...#.#......#.
.##.....#...#..#..#..#...###...
.#...#....#..#...........###...
.....#...........##.#......#...
.....#....##......##..#.#......
.#.#..#..#...#.#..#..##..#.#...
..#..#####.#..#.#.#.....#.#....
#......#.##.#......#.#......#..
.#...............#..#.#.......#
...##...##.....##.##......#..##
#.......##.#...........#....#..
#...##.#...#.#..#..###...##....
#..##..#..#......#.#...###..#.#
.#.#..###.##..##.....#.........
##.#..##.#..........#.......#..
.###..##....##..#..#...##......
........#..##.##....#....#.....
.....#.#.#........#...#....#.#.
..#..#.#.....#.##....##........
...#....................#....#.
..#....#..###.##......#..#.#.##
.....#.#....#......#...#......#
###...##.......#.#.#.....#....#
..#..###.##..#..#....##.......#
#...#.###..#...#.##..##........
..#..#....#...........##..#....
.#............##..#...##.#..#..
.#.......#.#.........##..#..#..
....#.###.#...##....#.#.##.....
#.......#........#..#.##......#
#.....###....#....#..#....#....
...........#...#........#.....#
..##...#...#.##...##.#.#..#...#
##.##..#.......##..........#..#
............#.....#...#..#....#
.....#.#......#...#..#.#...#..#
............##.##.....##...#..#
##.#..#..#.#......#......#..##.
..#..#.........#...#..#.#.#....
#..#........#.......###.#......
...#.#.#....#......#.#...#.....
#...............#...#......##..
###.#...#......##.....#..##.##.
#.##...##.......###.##.........
.#.#.........#..#.....#........
..##..#............#.....#...##
......###...#.#...#..#...##....
#.........#.#.##.........##....
.#....##....#....##....#.##....
.#...##.#...#.......#...#....##
#................#......##.....
##..#......#.#.........##...##.
...#.#.#...#..#..##..#....#.#..
.##........#.#......##...#..#..
...##....#.#.....##..#.........
........###.#.#....###.##.#....
.............#....###.#..#.#...
.#...........##....#...#.......
#..#.......#.....##..#.........
..#.#..#....##...##.#.......#.#
#.###.#.........#..#.........#.
.......#.........##....##.#..##
.##...###..........#....#.#..##
.#.....#......##..#...#........
##..#..###........#.......#....
........#...#.##...........#.#.
.....#..#..###.............#..#
...######.##.....#...#......#..
.#...#....###...###......#.##..
...##.####.........#...#...##..
..##....#.......#.....#..#.....
#.##....#.#........#.....##....
.....#.#.###...........#...##.#
.............###........#......
...#..#...##.#....#..##.#.....#
....#.#.....#...#......###..##.
........#.......#..#...........
....#.#...#......#.#.....###...
..#.............####.##.....#..
..........#...#.#..............
..#.#...........#.#..##...##..#
.......#...#........#..##....##
#...#.....#.#.##...#.#.#...#..#
.....#..#....#.###.#.....#.#..#
....#.#.#...#.................#
#..#........##.###....#....#...
..##...##..............##....#.
...#.#...#.#...##........#...#.
##..##.#..#.#.#..#.#...#.#.#.##
..#.#..#....#..#.###.........#.
..#.....#..#..#........#.......
...#...#......##...###.....##..
#....#.##.....#.##..##..#..#...
......##..#.#.#..#.###...#...#.
.##.....##............#.#......
..#.#........##....#..#.####.#.
.#....###..#.......#...........
##...........#..#...#.....#.#..
.#..#....#..#....#.#.........#.
.#.###....#.....##.....##......
.#.#.......#.......#.###.#...#.
...###..#..#....#..####.##....#
..........##...#...#...........
.#.....#.#..##..##...##..#.....
##.......#.#...#..###..#..##...
..#.##......###..#........#..##
....###...#..........#.#..#.#..
#..#.#..##.......##....#.#..##.
.#...#...#..#....#...###.......
.##.#.#.#.....#.....#.#.#.....#
...##.#.....#..#.#...#.####.#..
#...##.....####..#.###.##..#.##
..###..##....#####......##.....
###..............#.#..........#
#...##......##....#...#..##..#.
.#..#...#....##.##.....#....##.
...#.#...#..#..#.......#.##....
.#...#..#.......#.##.#..#...#.#
.#..#.##...#...#.............#.
.#.#.#....##..#.#.#.#.#......##
..#....#.#...##.##.#...#.#.#.#.
...#..#..##.........##..#.....#
....#..........#.#.......#.....
........#....#.#..#.....#.#.#..
.#...#.......#..#.##.........#.
##......#.....#...........#.#..
....#....##...#..#####.####...#
.....##....#....#..#.....#..##.
.#...#.#..###....#......#...#..
.#.#.#.#.....##..........#....#
...#.....#.....#..#............
...#.#..#.....#.............#..
......#....#.#.....#.##...#..#.
...#....#.#...##..#....###.....
...#..#............##...##.##..
..#....#..............#.....#..
.#..#.......#.#.##......#.###..
..#...#.........#..#.....#.....
#..........#.....##............
##.#.#.#....##......#..#....#.#
.#..#.....#.#..#.....#..##.....
...#.#.....#..#..#..#.##.###...
...##.#.....#.....#.......#....
.....................##.#...#..
...#.#...#...#...###..#..#.#...
#....##..###.#...##.#......#..#
.##...##..##...##......##.#....
............#.....#.##.#.##.#.#
.#...##.#..........###......#..
.....##.....##....#.#....##..#.
...#....#.....#....#.....#.#...
................##.#...#....##.
#..###.......#......###......#.
###..#.........#.#.#.....#....#
..#.#......#....#.#......##...#
#...#......#.#.#.#..#...#..###.
.#...#..#...##..#...##....###..
#.#.#.#..###................#.#
...#.####....##.#.....#..#.....
#.#...##..#.#...###.#..#...#...
#..####........#.#..#...##..##.
..#..###..#..........##.###...#
.....#..###.#.#....#....##....#
.###..#.#.#....#...##.......##.
#..#..........#...............#
.#.#...#.....#.###..##......##.
#...#...#...##...##.....##..#..
.....##..###...........#.......
........###..##........#..##..#
#....#...##..##..#.#.#.###...#.
.#..#......##.#..#...#.........
.#....#.##.....................
#.##.##...........#.####..#....
......##....#..#.....#.#....#..
....##.#........#.#.#.#.#..#..#
.#..##..##..#.....#...#.#.....#
...#..#.#.....#..#..##....##..#
..#....#.....#........#.....#..
#.#.#..#..#.#..#...###.#.#....#
"""

from functools import reduce
import operator

def traverse_map(map = None,symbol_tree = '#',symbol_square = '.',go_right = 3, go_down = 1):
    trees = 0
    pos = 0
    first_row = False
    char = None
    if map:
        for i in range(0,len(map.splitlines()),go_down):
            y = int(divmod((i / go_down) * go_right, len(map.splitlines()[i]))[1])
            char = map.splitlines()[i][y]
            if char == symbol_tree:
                trees+=1
        return trees

routes = ((1,1),(3,1),(5,1),(7,1),(1,2))
trees = []

for r in routes:
    trees.append(traverse_map(map = input_map, go_right = r[0],go_down=r[1]))
print("Product of all routes = {}".format(reduce(operator.mul, trees, 1)))

